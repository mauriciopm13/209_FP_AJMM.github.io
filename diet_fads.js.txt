
let dietData = [];

// Fetch the JSON file with diet info
fetch('diets_data.json')
  .then(response => response.json())
  .then(data => {
    dietData = data;
    buildDietButtons(data);
  });

function buildDietButtons(data) {
  const container = document.getElementById('diet-buttons');
  data.forEach(diet => {
    const button = document.createElement('a');
    button.classList.add('team-card');
    button.href = "#diet-info";
    button.innerHTML = `<h3>${diet.name}</h3>`;
    button.addEventListener('click', () => loadDietInfo(diet));
    container.appendChild(button);
  });
}

function loadDietInfo(diet) {
  // Show info section
  document.getElementById('diet-info').style.display = 'block';

  // Fill in the info
  document.getElementById('diet-name').textContent = diet.name;
  document.getElementById('diet-summary').textContent = diet.summary;
  document.getElementById('diet-peak').textContent = diet.peak_search_trend;
  document.getElementById('diet-image').src = `Data/${diet.image}`;
  document.getElementById('diet-image').alt = `${diet.name} image`;

  // List the foods
  const foodsList = document.getElementById('diet-foods');
  foodsList.innerHTML = '';
  diet.main_foods.forEach(food => {
    const li = document.createElement('li');
    li.textContent = food;
    foodsList.appendChild(li);
  });

  // Load Tableau dashboard
  loadTableauViz(diet.name);
}

function loadTableauViz(dietName) {
  const vizContainer = document.getElementById('tableau-dash-container');
  vizContainer.innerHTML = '';
  document.getElementById('tableau-viz').style.display = 'block';

  // Replace with actual Tableau embed URL logic
  const tableauDiv = document.createElement('div');
  tableauDiv.innerHTML = `
    <iframe src="https://public.tableau.com/views/YOUR_DASHBOARD_NAME_HERE/${dietName.replace(/ /g, '')}?:embed=yes&:display_count=yes"
            width="100%" height="700px" frameborder="0"></iframe>
  `;
  vizContainer.appendChild(tableauDiv);
}
